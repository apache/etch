<?xml version="1.0" encoding="utf-8" ?>
<project name="tasks.xml" default="help" basedir="."
	xmlns:artifact="urn:maven-artifact-ant">
	<description>Common Tasks for CUAE components</description>
	<import file="macros.xml"/>

	<!-- Environment -->
	<property environment="env"/>

	<!-- Imported Ant Libraries -->
	<taskdef resource="cloverlib.xml"
		classpath="${env.CLOVER_HOME}/lib/${common.runtime.lib.clover.jar}"/>
	<typedef resource="org/apache/maven/artifact/ant/antlib.xml"
		uri="urn:maven-artifact-ant"
		classpath="${env.MAVEN_ANT_TASKS_HOME}/${common.runtime.lib.maven_ant_tasks.jar}"/>

	<!-- Standard targets, do not modify or overload. Overload the "do-*"
		targets in each sub-project -->
	<target name="Debug"
		description="build with debug support and no optimizations"
		depends="debug"/>
	<target name="Release"
		description="build as is in deployment"
		depends="release"/>
	<target name="Clean"
		description="remove files and directories generated by build"
		depends="clean"/>
	<target name="Help"
		description="print standard help"
		depends="help"/>

	<target name="debug" depends="init-debug,all"/>
	<target name="release" depends="init-release,all"/>
	<target name="clean" depends="init-clean,init,do-clean"/>
	<target name="help" depends="init-help"/>

	<target name="debug-rebuild" depends="Clean,Debug"/>
	<target name="release-rebuild" depends="Clean,Release"/>


	<!-- Internal Targets -->

	<!-- Debug Target -->
	<target name="init-debug">
		<tstamp/>
		<property name="common.build.target" value="Debug"/>
		<property name="common.javac.debug" value="on"/>
		<property name="common.javac.optimize" value="off"/>
	</target>

	<!-- Release Target -->
	<target name="init-release">
		<tstamp/>
		<property name="common.build.target" value="Release"/>
		<property name="common.javac.debug" value="on"/>
		<property name="common.javac.optimize" value="off"/>
	</target>

	<!-- Initialization Target -->
	<target name="init" depends="do-init">
	</target>

	<!-- Build target -->
	<target name="build" depends="init,do-build">
	</target>

	<!-- Clean Target -->
	<target name="init-clean">
		<tstamp/>
		<property name="common.build.target" value="Clean"/>
	</target>

	<!-- Post-build Target -->
	<target name="postbuild" depends="build,do-postbuild">
	</target>

	<!-- Test Target -->
	<target name="test" depends="postbuild,do-test">
	</target>

	<target name="posttest" depends="test" if="build.publish">
	<!-- Posttest Target -->
		<antcall target="do-publish"/>
	</target>

	<!-- all target -->
	<target name="all" depends="test,posttest">
	</target>

	<!-- Print a short help message -->
	<target name="init-help" depends="do-help">
		<echo>
			The following Generic targets are supported:
			Debug           := Debug build
			Release         := Release build
			Clean           := Clean action
			debug-rebuild   := Clean then Debug build
			release-rebuild := Clean then Release build
		</echo>
	</target>

	<!-- Overload these targets in each sub-project -->

	<target name="do-init">
	<!-- Use this target for any pre-build initialization (directory creation,
		etc.)-->
		<echo>No Initialization defined.</echo>
	</target>

	<target name="do-build">
	<!-- Use this target for the actual build logic. "do-init" will be called
		before this target. -->
		<echo>No build target defined.</echo>
	</target>

	<target name="do-clean">
	<!-- Use this target to implement any build-clean logic. "do-init" will
		*not* be called before this target. -->
		<echo>No Clean target defined.</echo>
	</target>

	 <target name="do-postbuild">
	 <!-- Use this target to copy the build products to the common workspace
	 	build dir, i.e. \Build. The "do-build" target must complete
	 	successfully before this target is called. -->
		<echo>No Postbuild defined.</echo>
	</target>

	<target name="do-test">
	<!-- Use this target to execute unit tests -->
		<echo>No Unit Tests Defined.</echo>
	</target>

	<target name="do-publish">
	<!-- Use this target to publish the build results but iff the tests
		successfully passed -->
		<echo>No Publishing defined.</echo>
	</target>

	<target name="do-help">
	<!-- Use this target to list any special targets or help messages for the
		subproject. -->
		<echo> The following special targets are supported: None</echo>
	</target>

</project>
