// This file automatically generated by:
//   @EtchVersion@ (@EtchBuildTag@) / csharp @EtchVersion@ (@EtchBuildTag@)
//   Tue Apr 15 15:02:12 CDT 2008
using System;
using System.Collections;
using System.Collections.Generic;
using System.Text;
using etch.bindings.csharp.examples.mixin.bar;
using etch.bindings.csharp.examples.mixin.baz;
using etch.bindings.csharp.examples.mixin.baz.types.Baz;
using etch.bindings.csharp.examples.mixin.bar.types.Bar;
using etch.bindings.csharp.examples.mixin.types.Foo;
using Etch.Util;
using Etch.Msg;
using Etch.Support;
using Etch.Transport;

namespace etch.bindings.csharp.examples.mixin
{

///
///<summary> Main implementation for FooClient. </summary>
///
public class MainFooClient : FooHelper.FooClientFactory
{
	///
	/// <summary>Main for FooClient</summary>
	/// <param name="args"></param>
	///
	public static void Main(String[] args)
	{
		string uri = "tcp://localhost:4001";
        MainFooListener.Main1(null);

		MainFooClient implFactory = new MainFooClient();
		RemoteFooServer server = FooHelper.NewServer( uri, null, implFactory );
		
		server._TransportControl(Etch.Transport.TransportConsts.START_AND_WAIT_UP, 4000 );

        // Insert Your Code Here
        //---------------------------------------------------------------------
        StrStrHashMap bazTable = new StrStrHashMap();
        bazTable.Add("def", "baz");

        StrStrHashMap barTable = new StrStrHashMap();
        barTable.Add("def", "bar");

        StrStrHashMap fooTable = new StrStrHashMap();
        fooTable.Add("def", "foo");

        BazData bazData = new BazData(1, bazTable);
        BarData barData = new BarData(2, barTable, bazData);
        FooData fooData = new FooData(3, fooTable, barData, bazData);

        bool? ok;

        ok = server.baz1(bazData);
        Console.WriteLine("baz1 => " + ok);

        ok = server.baz2(bazData);
        Console.WriteLine("baz2 => " + ok);

        ok = server.bar1(barData);
        Console.WriteLine("bar1 => " + ok);

        ok = server.bar2(barData);
        Console.WriteLine("bar2 => " + ok);

        ok = server.foo1(fooData);
        Console.WriteLine("foo1 => " + ok);

        ok = server.foo2(fooData);
        Console.WriteLine("foo2 => " + ok);

		server._TransportControl(Etch.Transport.TransportConsts.STOP_AND_WAIT_DOWN, 4000 );

	}

	///
	/// <summary>Constructs the MainFooClient.</summary>
	///
	public MainFooClient()
	{
		// Nothing to do.
	}

	///
	/// <summary>Return a new instance of FooClient.</summary>
	/// @param server
	///
	public FooClient NewFooClient( RemoteFooServer server )
	{
		return new ImplFooClient( server );
	}

}

}